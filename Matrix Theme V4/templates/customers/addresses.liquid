<div class="customer-addresses" data-template="addresses">
  <div class="container pt-2xl pb-3xl">
    <h1 class="glow mb-xl">{{ 'customer.addresses.title' | t }}</h1>

    <div class="customer-addresses-grid">
      <div class="customer-address-form-panel">
        <h2 class="customer-section-title mb-lg">{{ 'customer.addresses.add_new' | t }}</h2>

        {%- form 'customer_address', customer.new_address -%}
          <div class="grid grid--2">
            <div class="form-group">
              <label class="form-label" for="address-first-name">{{ 'customer.addresses.first_name' | t }}</label>
              <input type="text" id="address-first-name" class="form-input" name="address[first_name]" autocomplete="given-name" placeholder="First name">
            </div>

            <div class="form-group">
              <label class="form-label" for="address-last-name">{{ 'customer.addresses.last_name' | t }}</label>
              <input type="text" id="address-last-name" class="form-input" name="address[last_name]" autocomplete="family-name" placeholder="Last name">
            </div>
          </div>

          <div class="form-group">
            <label class="form-label" for="address-address1">{{ 'customer.addresses.address1' | t }}</label>
            <input type="text" id="address-address1" class="form-input" name="address[address1]" autocomplete="address-line1" placeholder="Street address">
          </div>

          <div class="form-group">
            <label class="form-label" for="address-address2">{{ 'customer.addresses.address2' | t }}</label>
            <input type="text" id="address-address2" class="form-input" name="address[address2]" autocomplete="address-line2" placeholder="Apartment, suite, etc.">
          </div>

          <div class="grid grid--2">
            <div class="form-group">
              <label class="form-label" for="address-city">{{ 'customer.addresses.city' | t }}</label>
              <input type="text" id="address-city" class="form-input" name="address[city]" autocomplete="address-level2" placeholder="City">
            </div>

            <div class="form-group">
              <label class="form-label" for="address-country">{{ 'customer.addresses.country' | t }}</label>
              <select id="address-country" class="form-select" name="address[country]" autocomplete="country"></select>
            </div>
          </div>

          <div class="grid grid--2">
            <div class="form-group">
              <label class="form-label" for="address-province">{{ 'customer.addresses.province' | t }}</label>
              <select id="address-province" class="form-select" name="address[province]" autocomplete="address-level1"></select>
            </div>

            <div class="form-group">
              <label class="form-label" for="address-zip">{{ 'customer.addresses.zip' | t }}</label>
              <input type="text" id="address-zip" class="form-input" name="address[zip]" autocomplete="postal-code" placeholder="Postal / ZIP">
            </div>
          </div>

          <div class="form-group">
            <label class="form-label" for="address-phone">{{ 'customer.addresses.phone' | t }}</label>
            <input type="tel" id="address-phone" class="form-input" name="address[phone]" autocomplete="tel" placeholder="+1 (555) 000-0000">
          </div>

          <div class="form-group">
            <label class="form-checkbox">
              {{ form.set_as_default_checkbox }}
              <span>{{ 'customer.addresses.set_default' | t }}</span>
            </label>
          </div>

          <div class="customer-form-actions mt-md">
            <button type="submit" class="btn btn--primary">
              {{ 'customer.addresses.add' | t }}
            </button>
          </div>
        {%- endform -%}
      </div>

      <div class="customer-existing-addresses mt-2xl">
        <h2 class="customer-section-title mb-lg">{{ 'customer.addresses.existing' | t }}</h2>

        {%- if customer.addresses.size > 0 -%}
          <div class="customer-address-list">
            {%- for address in customer.addresses -%}
              <div class="customer-address-card">
                {% if address == customer.default_address %}
                  <span class="badge mb-sm">Default</span>
                {% endif %}
                <div class="customer-address-text">
                  {{ address | format_address }}
                </div>
                <div class="customer-address-actions mt-md">
                  {%- form 'customer_address', address -%}
                    <input type="hidden" name="_method" value="delete">
                    <button type="submit" class="btn btn--danger btn--small" data-confirm="{{ 'customer.addresses.delete_confirm' | t }}">
                      {{ 'customer.addresses.delete' | t }}
                    </button>
                  {%- endform -%}
                </div>
              </div>
            {%- endfor -%}
          </div>
        {%- else -%}
          <div class="customer-empty-state">
            <p class="customer-empty-message">No addresses saved yet.</p>
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</div>

<style>
  .customer-section-title {
    font-size: var(--h3);
    padding-bottom: var(--space-sm);
    border-bottom: 1px solid var(--color-border);
  }

  .customer-address-form-panel {
    background: var(--color-panel);
    border: 1px solid var(--color-border);
    border-radius: var(--radius);
    padding: var(--space-xl);
  }

  .customer-form-actions {
    display: flex;
    gap: var(--space-sm);
  }

  .customer-address-list {
    display: grid;
    gap: var(--space-md);
  }

  .customer-address-card {
    background: var(--color-panel);
    border: 1px solid var(--color-border);
    border-radius: var(--radius);
    padding: var(--space-lg);
    transition: border-color var(--transition-base);
  }

  .customer-address-card:hover {
    border-color: var(--color-accent-glow);
  }

  .customer-address-text {
    font-size: var(--font-size-sm);
    color: var(--color-text);
    line-height: 1.6;
  }

  .customer-address-actions {
    display: flex;
    gap: var(--space-sm);
  }

  .customer-empty-state {
    text-align: center;
    padding: var(--space-2xl) var(--space-md);
    background: var(--color-panel);
    border: 1px solid var(--color-border);
    border-radius: var(--radius);
  }

  .customer-empty-message {
    font-family: var(--font-heading);
    font-size: var(--font-size-lg);
    color: var(--color-text-muted);
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  @media (min-width: 1024px) {
    .customer-addresses-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--space-2xl);
      align-items: start;
    }

    .customer-existing-addresses {
      margin-top: 0;
    }
  }

  @media (max-width: 767px) {
    .customer-address-form-panel .grid--2 {
      grid-template-columns: 1fr;
    }
  }
</style>
