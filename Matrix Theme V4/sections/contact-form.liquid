{%- comment -%}
  Contact Form Section
  Uses {% form 'contact' %} with name, email, message fields
{%- endcomment -%}

<div class="container container--narrow">
  <div class="contact-section pt-2xl pb-3xl">

    {%- if section.settings.heading != blank -%}
      <header class="contact-section__header mb-xl">
        <h1 class="glow">{{ section.settings.heading }}</h1>
      </header>
    {%- endif -%}

    {%- form 'contact' -%}

      {%- if form.posted_successfully? -%}
        <div class="contact-form__success mb-xl" role="status">
          <p class="contact-form__success-text">> MESSAGE_SENT // TRANSMISSION COMPLETE_</p>
        </div>
      {%- endif -%}

      {%- if form.errors -%}
        <div class="contact-form__errors mb-xl" role="alert">
          <p class="contact-form__errors-heading">> ERROR: TRANSMISSION FAILED_</p>
          <ul class="contact-form__errors-list">
            {%- for field in form.errors -%}
              <li>{{ form.errors.translated_fields[field] }} â€” {{ form.errors.messages[field] }}</li>
            {%- endfor -%}
          </ul>
        </div>
      {%- endif -%}

      <div class="form-group">
        <label class="form-label" for="contact-name-{{ section.id }}">Name</label>
        <input
          type="text"
          id="contact-name-{{ section.id }}"
          class="form-input"
          name="contact[{{ 'contact.form.name' | t }}]"
          value=""
          autocomplete="name"
          placeholder="> enter_name"
        >
      </div>

      <div class="form-group">
        <label class="form-label" for="contact-email-{{ section.id }}">Email</label>
        <input
          type="email"
          id="contact-email-{{ section.id }}"
          class="form-input{% if form.errors contains 'email' %} form-input--error{% endif %}"
          name="contact[email]"
          value="{% if form.email %}{{ form.email }}{% endif %}"
          autocomplete="email"
          autocorrect="off"
          autocapitalize="off"
          placeholder="> enter_email"
          required
        >
      </div>

      <div class="form-group">
        <label class="form-label" for="contact-message-{{ section.id }}">Message</label>
        <textarea
          id="contact-message-{{ section.id }}"
          class="form-textarea{% if form.errors contains 'body' %} form-textarea--error{% endif %}"
          name="contact[{{ 'contact.form.message' | t }}]"
          placeholder="> type_message_here"
          required
        >{% if form.body %}{{ form.body }}{% endif %}</textarea>
      </div>

      <button type="submit" class="btn btn--primary btn--large">
        SEND_MESSAGE >
      </button>

    {%- endform -%}

  </div>
</div>

<style>
  .contact-section__header {
    border-bottom: 1px solid var(--color-border);
    padding-bottom: var(--space-lg);
  }

  .contact-form__success {
    padding: var(--space-md);
    border: 1px solid var(--color-success);
    border-radius: var(--radius);
    background: rgba(0, 255, 65, 0.05);
  }

  .contact-form__success-text {
    font-family: var(--font-heading);
    font-size: var(--font-size-lg);
    color: var(--color-accent);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    text-shadow: 0 0 5px var(--color-accent-glow);
    margin: 0;
  }

  .contact-form__errors {
    padding: var(--space-md);
    border: 1px solid var(--color-error);
    border-radius: var(--radius);
    background: rgba(255, 68, 68, 0.05);
  }

  .contact-form__errors-heading {
    font-family: var(--font-heading);
    font-size: var(--font-size-lg);
    color: var(--color-error);
    text-transform: uppercase;
    letter-spacing: 0.06em;
    margin: 0 0 var(--space-sm);
  }

  .contact-form__errors-list {
    padding-left: var(--space-lg);
    list-style: disc;
  }

  .contact-form__errors-list li {
    color: var(--color-error);
    font-size: var(--font-size-sm);
    margin-bottom: var(--space-xs);
  }
</style>

{% schema %}
{
  "name": "Contact form",
  "tag": "section",
  "class": "contact-form-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Contact"
     }
   ],
   "disabled_on": { "groups": ["header", "footer"] },
   "presets": [{ "name": "Contact form", "category": "Content" }]
}
{% endschema %}
